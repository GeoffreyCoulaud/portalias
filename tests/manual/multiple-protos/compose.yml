networks:
  net1:
    driver: bridge
    labels:
      - "portalias.enabled=true"
  net2:

services:

  portalias:
    build:
      context: ../../../
      dockerfile: Dockerfile
    environment:
      - RULES_ID=test-multiple-protos
      - DRY_RUN=true
      - LOG_LEVEL=DEBUG
    network_mode: host
    cap_add:
      - NET_ADMIN
      - NET_RAW
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock

  web:
    image: httpd
    networks:
      net1:
      net2:
    labels:
      - "portalias.80.tcp,udp=8888"
